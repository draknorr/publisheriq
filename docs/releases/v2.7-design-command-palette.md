# v2.7 Release Notes - Command Palette & Design System

**Release Date:** January 25, 2026

---

## Overview

Version 2.7 introduces the **Command Palette** for unified filtering and a refreshed **design system** with warm stone colors and improved typography.

### Highlights

- **Command Palette** - Press ⌘K to access presets, filters, and content in one unified interface
- **Filter Syntax** - Type expressions like `ccu > 50000` or `genre:action` for power user filtering
- **Active Filter Bar** - Color-coded filter chips grouped by category for visual clarity
- **Warm Stone Theme** - Refined color palette with warm off-white backgrounds and dusty coral accents
- **New Typography** - DM Sans for UI, JetBrains Mono for data tables

---

## Command Palette

### Opening

| Platform | Shortcut |
|----------|----------|
| macOS | ⌘K |
| Windows/Linux | Ctrl+K |

The command palette opens on the Games (`/apps`) and Companies (`/companies`) pages.

### Views

| View | Purpose |
|------|---------|
| Home | Search, presets, quick filters, genres |
| Tags | Browse all Steam tags with counts |
| Genres | Browse all genres with counts |
| Categories | Browse Steam categories |

### Keyboard Navigation

| Shortcut | Action |
|----------|--------|
| **↑** / **↓** | Navigate through options |
| **Enter** | Select and apply option |
| **Escape** | Close palette or go back |
| **Backspace** (empty) | Go back to home view |

---

## Filter Syntax Reference

Type directly in the command palette search input to apply filters using natural expressions.

### Range Filters

| Format | Example | Description |
|--------|---------|-------------|
| `shortcut > value` | `ccu > 50000` | Greater than |
| `shortcut >= value` | `score >= 85` | Greater than or equal |
| `shortcut < value` | `price < 20` | Less than |
| `shortcut <= value` | `owners <= 100000` | Less than or equal |
| `shortcut min-max` | `ccu 1000-50000` | Between range |

### Boolean Filters

| Format | Example | Description |
|--------|---------|-------------|
| `shortcut` | `free` | Enable filter |
| `shortcut:yes` | `workshop:yes` | Enable filter |
| `shortcut:no` | `ea:no` | Disable/exclude filter |

### Content Filters

| Format | Example | Description |
|--------|---------|-------------|
| `genre:value` | `genre:action` | Filter by genre |
| `tag:value` | `tag:roguelike` | Filter by tag |
| `deck:status` | `deck:verified` | Steam Deck status |

### Preset Filters

| Format | Example | Description |
|--------|---------|-------------|
| Preset name | `rising stars` | Apply preset by name |
| Partial match | `momentum` | Fuzzy match preset |

### Available Shortcuts

| Shortcut | Filter | Type |
|----------|--------|------|
| `ccu` | Peak CCU | range |
| `owners` | Total Owners | range |
| `reviews` | Review Count | range |
| `score` | Review Score (%) | range |
| `price` | Price ($) | range |
| `growth` | 7d CCU Growth (%) | range |
| `momentum` | Momentum Score | range |
| `playtime` | Avg Playtime (hours) | range |
| `free` | Free to Play | boolean |
| `ea` | Early Access | boolean |
| `workshop` | Steam Workshop | boolean |
| `sale` | On Sale | boolean |
| `indie` | Indie Publisher | boolean |
| `genre` | Genre | content |
| `tag` | Tag | content |
| `deck` | Steam Deck | select |
| `platform` | Platform | select |

---

## Active Filter Bar

Applied filters are displayed as color-coded chips grouped by category:

| Category | Color | Examples |
|----------|-------|----------|
| Preset | Purple | Rising Stars, High Momentum |
| Quick Filter | Coral | Popular, Trending, Free |
| Metric | Blue | CCU > 1,000, Score >= 90 |
| Content | Green | Genre: Action, Tag: Roguelike |
| Platform | Orange | Steam Deck: Verified |
| Release | Amber | Released: Last 30 days |
| Relationship | Pink | Publisher: Valve |

### Interactions

- **Click chip**: Modify the filter in command palette
- **Click X**: Remove the filter
- **Overflow**: Chips wrap or scroll when many filters are active

---

## Design System v2.7

### Color Palette Changes

#### Light Theme

| Token | Old Value | New Value | Usage |
|-------|-----------|-----------|-------|
| `--surface` | `#ffffff` | `#FAF9F7` | Base background (warm off-white) |
| `--surface-raised` | `#f8fafc` | `#FFFFFF` | Cards, elevated content |
| `--accent-primary` | `#0891b2` (teal) | `#D4716A` (dusty coral) | Primary actions |
| `--text-primary` | `#0f172a` | `#2D2A26` | Main text (warm black) |
| `--border-muted` | `#e2e8f0` | `#E8E4DE` | Subtle borders |

#### Dark Theme

| Token | Old Value | New Value | Usage |
|-------|-----------|-----------|-------|
| `--surface` | `#09090b` | `#1A1816` | Base background (warm dark) |
| `--accent-primary` | `#22d3ee` (cyan) | `#E07D75` (coral) | Primary actions |
| `--text-primary` | `#fafafa` | `#E8E4DE` | Main text |

### Typography

#### Font Families

| Font | Variable | Usage |
|------|----------|-------|
| DM Sans Variable | `--font-sans` | Primary UI text |
| JetBrains Mono Variable | `--font-mono` | Code, data display |

#### Font Data Utility

```css
.font-data {
  font-family: var(--font-mono);
  font-variant-numeric: tabular-nums;
}
```

Usage: `<td className="font-data">1,234,567</td>` for aligned numeric data.

### Border Radius

| Token | Old Value | New Value |
|-------|-----------|-----------|
| `rounded` (default) | 8px | 6px |
| `rounded-lg` | 12px | 8px |
| `rounded-md` | 6px | 6px |

### Shadows

Theme-aware shadow tokens for consistent elevation:

| Token | Usage |
|-------|-------|
| `--shadow-xs` | Minimal elevation (buttons) |
| `--shadow-sm` | Cards, panels |
| `--shadow-md` | Elevated hover states |
| `--shadow-lg` | Modals, dropdowns |
| `--shadow-xl` | Popovers, tooltips |

### Dark Mode Support

The design system supports both class-based and attribute-based dark mode:

- **Class-based**: `.dark` class on `<html>` element
- **Attribute-based**: `[data-theme="dark"]` attribute on `<html>` element

Both are supported for compatibility with different theme implementations.

---

## Component Updates

### Badge Component

CSS variable-based variants for consistent theming:

| Variant | Token Pattern |
|---------|---------------|
| default | `--badge-default-bg`, `--badge-default-text` |
| primary | `--badge-primary-bg`, `--badge-primary-text` |
| secondary | `--badge-secondary-bg`, `--badge-secondary-text` |
| success | `--badge-success-bg`, `--badge-success-text` |
| warning | `--badge-warning-bg`, `--badge-warning-text` |
| error | `--badge-error-bg`, `--badge-error-text` |

### Button Component

- Refined border radius (`rounded-md`)
- Updated focus ring using `--border-focus` token
- Improved dark mode contrast

### Input Component

- CSS variable-based styling
- Focus state uses primary accent color
- Consistent placeholder color via `--text-placeholder`

### FilterPill Component

- Changed from `rounded-full` to `rounded-md` for card-like appearance
- Category-based color coding
- Improved click targets

---

## New Components

### ActiveFilterBar

A new component that displays applied filters as grouped, color-coded chips:

```tsx
<ActiveFilterBar
  filters={activeFilters}
  onRemoveFilter={handleRemove}
  onEditFilter={handleEdit}
/>
```

**Features:**
- Automatic color assignment by filter category
- Overflow handling with horizontal scroll
- Command palette integration for editing
- Keyboard accessible

### CommandPalette

The unified filter interface accessible via ⌘K:

```tsx
<CommandPalette
  isOpen={isOpen}
  onClose={handleClose}
  onApplyFilter={handleApply}
/>
```

**Views:**
- Home (default): Search, presets, quick filters, genres
- Tags: Full tag list with counts
- Genres: Genre grid with counts
- Categories: Steam category checkboxes

---

## Technical Implementation

### New Files

| File | Purpose |
|------|---------|
| `apps/admin/src/lib/filter-registry.ts` | 40+ filter definitions with metadata |
| `apps/admin/src/lib/filter-syntax-parser.ts` | Syntax parsing and validation |
| `apps/admin/src/components/command-palette/CommandPalette.tsx` | Main palette wrapper |
| `apps/admin/src/components/command-palette/CommandPaletteHome.tsx` | Home view |
| `apps/admin/src/components/command-palette/CommandPaletteTags.tsx` | Tags browser |
| `apps/admin/src/components/command-palette/CommandPaletteGenres.tsx` | Genres browser |
| `apps/admin/src/components/command-palette/CommandPaletteCategories.tsx` | Categories browser |
| `apps/admin/src/hooks/useCommandPalette.ts` | Palette state management |
| `apps/admin/src/hooks/useKeyboardShortcut.ts` | ⌘K keyboard listener |
| `apps/admin/src/components/ActiveFilterBar.tsx` | Filter chip display |

### Filter Registry Structure

```typescript
interface FilterDefinition {
  id: string;
  label: string;
  shortLabel?: string;
  category: FilterCategory;
  type: 'range' | 'boolean' | 'content' | 'select';
  shortcuts: string[];  // e.g., ['ccu', 'players']
  urlParam: string;
  chipColor: ChipColor;
}
```

### Syntax Parser

The parser converts user input to structured filter objects:

1. **Range**: `ccu 1000-50000` → `{ field: 'ccu', min: 1000, max: 50000 }`
2. **Comparison**: `ccu > 50000` → `{ field: 'ccu', min: 50000 }`
3. **Boolean**: `free:yes` → `{ field: 'free', value: true }`
4. **Content**: `genre:action` → `{ field: 'genre', value: 'action' }`
5. **Preset**: `rising stars` → `{ preset: 'rising_stars' }`

---

## Migration Notes

### CSS Variable Changes

If you have custom components using the old color tokens, update them:

```css
/* Old */
background: var(--accent-primary);  /* was teal #0891b2 */

/* New */
background: var(--accent-primary);  /* now coral #D4716A */
```

### Font Changes

The default sans-serif font changed from Geist to DM Sans:

```css
/* Old */
font-family: var(--font-geist-sans);

/* New */
font-family: var(--font-sans);  /* DM Sans Variable */
```

---

## Related Documentation

- [Keyboard Shortcuts](../user-guide/keyboard-shortcuts.md) - Full shortcut reference
- [Games Page Guide](../user-guide/games-page.md) - Using the Games page
- [Companies Page Guide](../user-guide/companies-page.md) - Using the Companies page
- [Design System](../developer-guide/architecture/design-system.md) - Full design system reference
- [v2.6 Release Notes](./v2.6-games-page.md) - Previous release (Games Page)
